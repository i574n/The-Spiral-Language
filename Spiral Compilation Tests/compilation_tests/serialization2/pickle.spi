open real_pickle
inl size forall t. (x : t) : i32 = real size x
inl pickle forall t. (x : t) (state : mut i32 * array u8) = real pickle x state
inl unpickle forall t. (state : mut i32 * array u8) : t = real unpickle `t state